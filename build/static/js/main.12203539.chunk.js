(this.webpackJsonpalphatype=this.webpackJsonpalphatype||[]).push([[0],{36:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r,s=n(1),a=n.n(s),c=n(12),i=n.n(c),o=(n(36),n(3)),l=n(0),u=function(e){var t=e.user,n=t?"20px":"10px";return Object(l.jsxs)("div",{className:"header",style:{padding:n},children:[Object(l.jsx)("h1",{className:"gameTitle",children:"alphaType"}),t?"":"A Typing Game"]})},j=n(4),d=n.n(j),b=n(8),x=n(13),p=n.n(x),h="/api/results",O=null,f=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,p.a.post(h,{score:t},n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={allResults:f,setToken:function(e){O="bearer ".concat(e)},saveScore:m},g="/api/users",y=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S={getAll:y,signUp:function(e){return p.a.post(g,e).then((function(e){return e.data}))}},w=n(31),k=function(e){var t=e.notifClass,n=e.notifMessage;return null===n?null:Object(l.jsx)(w.a,{variant:t,style:{padding:"6px"},children:n})},T=function(e){var t=e.start,n=e.now,r=e.localScore,s=(n-t)/1e3;return Object(l.jsx)("div",{className:"timer",children:t?r?Object(l.jsxs)("h3",{children:[Object(l.jsx)("b",{children:"Your alphaTime is: "}),r<=0?"Invalid Result":"".concat(r.toFixed(3),"s !")]}):Object(l.jsxs)("h3",{children:[Object(l.jsx)("b",{children:"Timer:"})," ",s.toFixed(3),"s"]}):Object(l.jsx)("h3",{children:"Timer starts when typing begins"})})},C=n(9),N=0,U=function(e){var t=e.user,n=e.setTotalTime,a=Object(s.useState)(""),c=Object(o.a)(a,2),i=c[0],u=c[1],j=Object(s.useState)(""),x=Object(o.a)(j,2),p=x[0],h=x[1],O=Object(s.useState)(""),f=Object(o.a)(O,2),m=f[0],g=f[1],y=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],S=[];y.forEach((function(e,t){S=S.concat({a:e,idx:t})}));var w=S.slice(0,13),k=S.slice(13);Object(s.useEffect)((function(){A()}),[t]);var U=function(e){e.preventDefault(),"Escape"!==e.key&&"Space"!==e.code||A()},E=function(e){return document.getElementsByClassName("ctr-display")[0].style.backgroundColor=e},I=function(){var e=Object(b.a)(d.a.mark((function e(t,s,a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(" "===a){e.next=21;break}if(i||u(Date.now()),"a"===s&&(r=setInterval((function(){var e=Date.now();h(e)}),1),document.addEventListener("keyup",U)),a.toUpperCase()!==s.toUpperCase()){e.next=18;break}if(E(null),!("z"===s&&N>=y.length)){e.next=15;break}return c=(p-i)/1e3,clearInterval(r),e.next=10,g(c);case 10:return e.next=12,v.saveScore(c);case 12:n(c),e.next=16;break;case 15:"z"===s&&N<y.length?A():(document.getElementById(t+1).removeAttribute("disabled"),document.getElementById(t+1).focus());case 16:e.next=19;break;case 18:E("red");case 19:e.next=22;break;case 21:A();case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){for(var e=0;e<y.length;e++){var t=0!==e?"disabled":"";document.getElementById(e).disabled=t,document.getElementById(e).value=""}u(""),h(""),g(""),n(""),N=0,E(null),document.getElementById(0).focus(),document.removeEventListener("keyup",U)},L=function(e){return Object(l.jsx)("div",{className:"letterInput",children:e.map((function(e){return Object(l.jsxs)("span",{children:[Object(l.jsx)("label",{children:Object(l.jsxs)("b",{children:["\xa0",e.a,"\xa0"]})}),Object(l.jsx)("input",{disabled:0!==e.idx?"disabled":"",type:"text",id:e.idx,maxLength:"1",onChange:function(t){return I(e.idx,e.a,t.target.value)},onKeyDown:function(){return N+=1},style:{width:"20px",textAlign:"center"},autoComplete:"off"})]},e.idx)}))})};return Object(l.jsxs)("div",{children:[Object(l.jsx)(T,{now:p,start:i,localScore:m}),Object(l.jsx)("br",{}),L(w),L(k),Object(l.jsx)("br",{}),Object(l.jsx)(C.a,{variant:"secondary",size:"sm",onClick:function(){return A()},children:"Restart (Space Key)"})]})},E=function(e){return e.sort((function(e,t){return e.totalTime-t.totalTime}))},I=function(e){var t=e.usersTopScore,n=e.setUsersTopScore,r=e.allUsers,a=Object(s.useState)(!1),c=Object(o.a)(a,2),i=c[0],u=c[1];Object(s.useEffect)((function(){var e=[];0!==r.length&&(r.forEach((function(t){var n="No Score";if(0!==t.results.length){n=E(t.results)[0].totalTime;var r={username:t.username,totalTime:n};e=e.concat(r)}})),n(E(e)))}),[r]),console.log(r);var j=i?10:5,d=i?"Show Less":"Show More",b=i?"0":"20px";return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{style:{paddingTop:b},children:Object(l.jsx)("u",{children:"Leaderboard"})}),Object(l.jsx)("table",{className:"leaderboard",children:Object(l.jsxs)("tbody",{style:{textAlign:"left"},children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{}),Object(l.jsx)("th",{children:"User"}),Object(l.jsx)("th",{children:"Time"})]}),function(){var e;return t.slice(0,j).map((function(t,n){return e=n<=2?"".concat(["\ud83c\udfc6","\ud83e\udd48","\ud83e\udd49"][n]," "):Object(l.jsxs)("b",{children:[n+1,"."]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{style:{minWidth:"30px",textAlign:"center"},children:e}),Object(l.jsxs)("td",{style:{minWidth:"130px"},children:[t.username,"\xa0"]}),Object(l.jsxs)("td",{children:[t.totalTime,"s"]})]},n)}))}()]})}),Object(l.jsx)(C.a,{variant:"link",size:"sm",style:{textDecoration:"none",fontColor:"black"},onClick:function(){return u(!i)},children:d})]})},A=n(30),L=function(e){var t=e.user,n=e.allUsers,r=e.usersTopScore,s=e.logout,a=r.find((function(e){return e.username===t.username})),c=n.find((function(e){return e.username===t.username})),i="No Rank",o="No Game Played",u="0";if(void 0!==a&&null!==a.totalTime){var j=1+r.findIndex((function(e){return e.username===t.username}));i=1===j?Object(l.jsx)(A.a,{pill:!0,bg:"warning",text:"dark",children:"Champ \ud83c\udfc6"}):"Ranking: ".concat(j),o=0===r.length?null:"".concat(a.totalTime,"s"),u=c.results.length}return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{style:{margin:0},children:["Welcome, ",t.username]}),Object(l.jsxs)("p",{children:[" ",i]}),Object(l.jsx)("table",{className:"userStats",children:Object(l.jsxs)("tbody",{style:{textAlign:"left"},children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{style:{minWidth:"120px"},children:"Personal Best:"}),Object(l.jsx)("td",{children:o})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Games played:"}),Object(l.jsx)("td",{children:u})]})]})}),Object(l.jsx)("br",{}),Object(l.jsx)(C.a,{variant:"outline-secondary",size:"sm",onClick:function(){return s()},children:"Logout"})]})},B=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.post("/api/login",t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z={userLogin:B},F=function(e){var t=e.setUser,n=e.notification,r=Object(s.useState)(""),a=Object(o.a)(r,2),c=a[0],i=a[1],u=Object(s.useState)(""),j=Object(o.a)(u,2),x=j[0],p=j[1],h=Object(s.useState)(!1),O=Object(o.a)(h,2),f=O[0],m=O[1],g=function(){var e=Object(b.a)(d.a.mark((function e(r){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!f){e.next=12;break}return e.prev=2,e.next=5,S.signUp({username:c,password:x});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),n("danger",Object(l.jsxs)("div",{children:["Invalid Credentials",Object(l.jsx)("br",{}),"Username must be unique and have 3-12 characters",Object(l.jsx)("br",{}),"Password must have at least 3 characters"]})),p(""),e.abrupt("return");case 12:return e.prev=12,e.next=15,z.userLogin({username:c,password:x});case 15:s=e.sent,window.localStorage.setItem("loggedAppUser",JSON.stringify(s)),v.setToken(s.token),i(""),p(""),t(s),n("success","Welcome ".concat(s.username," & Happy alphaTyping!")),e.next=28;break;case 24:e.prev=24,e.t1=e.catch(12),p(""),n("danger","Wrong/Invalid Credentials");case 28:case"end":return e.stop()}}),e,null,[[2,7],[12,24]])})));return function(t){return e.apply(this,arguments)}}(),y=!1===f?"Login to Play":"Create Account",w=!1===f?"New User?":"Existing User?",k=!1!==f?"Login":"Sign Up";return Object(l.jsx)("div",{className:"loginContainer",children:Object(l.jsxs)("div",{className:"loginDisplay",children:[Object(l.jsxs)("form",{onSubmit:g,children:[Object(l.jsx)("h3",{children:y}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"loginField",children:["Username:\xa0",Object(l.jsx)("input",{type:"text",value:c,name:"Username",size:"12",onChange:function(e){var t=e.target;return i(t.value)}})]}),Object(l.jsxs)("div",{className:"loginField",children:["Password:\xa0",Object(l.jsx)("input",{type:"password",value:x,name:"Password",size:"12",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(l.jsx)("br",{}),Object(l.jsx)(C.a,{variant:"secondary",type:"submit",children:"Submit"})]}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"toggleLoginSignUp",children:[Object(l.jsx)("div",{children:w}),Object(l.jsx)(C.a,{variant:"link",style:{paddingTop:"0"},onClick:function(){m(!f),i(""),p("")},children:k})]})]})})},D=function(e){var t=e.user,n=e.setUser,r=Object(s.useState)([]),a=Object(o.a)(r,2),c=a[0],i=a[1],u=Object(s.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],x=Object(s.useState)(""),p=Object(o.a)(x,2),h=p[0],O=p[1],f=Object(s.useState)(""),m=Object(o.a)(f,2),g=m[0],y=m[1],w=Object(s.useState)(""),T=Object(o.a)(w,2),C=T[0],N=T[1];Object(s.useEffect)((function(){var e=window.localStorage.getItem("loggedAppUser");if(e){var t=JSON.parse(e);n(t),v.setToken(t.token)}}),[]),Object(s.useEffect)((function(){S.getAll().then((function(e){return i(e)}))}),[h]);var E=function(){return n(null),window.localStorage.removeItem("loggedAppUser")};return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"notifFlex",children:Object(l.jsx)(k,{notifClass:g,notifMessage:C})}),t?Object(l.jsxs)("div",{className:"mainContainer",children:[Object(l.jsx)("div",{className:"left-display",children:Object(l.jsx)(L,{user:t,allUsers:c,usersTopScore:d,logout:E})}),Object(l.jsx)("div",{className:"ctr-display",children:Object(l.jsx)(U,{user:t,totalTime:h,setTotalTime:O})}),Object(l.jsx)("div",{className:"right-display",children:Object(l.jsx)(I,{totalTime:h,usersTopScore:d,setUsersTopScore:b,allUsers:c})})]}):Object(l.jsx)(F,{user:t,setUser:n,notification:function(e,t){y(e),N(t),setTimeout((function(){N(null)}),5e3)}})]})},P=function(){return Object(l.jsx)("div",{className:"footer",children:Object(l.jsx)("small",{children:"Copyright \xa9 2021 Benny Luo"})})},W=(n(60),function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{user:n}),Object(l.jsx)(D,{user:n,setUser:r}),Object(l.jsx)(P,{})]})}),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};n(61);i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(W,{})}),document.getElementById("root")),R()}},[[62,1,2]]]);
//# sourceMappingURL=main.12203539.chunk.js.map