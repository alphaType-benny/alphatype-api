(this.webpackJsonpalphatype=this.webpackJsonpalphatype||[]).push([[0],{35:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),c=n(10),i=n.n(c),l=(n(35),n(3)),u=n(4),o=n.n(u),j=n(8),d=n(11),b=n.n(d),p="/api/results",x=null,f=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,b.a.post(p,{score:t},n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={allResults:f,setToken:function(e){x="bearer ".concat(e)},saveScore:h},m="/api/users",v=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(m);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={getAll:v,signUp:function(e){return b.a.post(m,e).then((function(e){return e.data}))}},y=n(30),S=n(1),w=function(e){var t=e.notifClass,n=e.notifMessage;return null===n?null:Object(S.jsx)(y.a,{variant:t,style:{padding:"6px"},children:n})},k=function(e){var t=e.start,n=e.now,r=e.localScore,a=(n-t)/1e3;return Object(S.jsx)("div",{className:"timer",children:t?r?Object(S.jsxs)("h3",{children:[Object(S.jsx)("b",{children:"Your alphaTime is:"})," ",r,"s !"]}):Object(S.jsxs)("h3",{children:[Object(S.jsx)("b",{children:"Timer:"})," ",a.toFixed(3),"s"]}):Object(S.jsx)("h3",{children:"Game starts when typing begins"})})},T=n(12),N=0,C=function(e){var t=e.user,n=e.setTotalTime,s=e.localScore,c=e.setLocalScore,i=Object(a.useState)(""),u=Object(l.a)(i,2),d=u[0],b=u[1],p=Object(a.useState)(""),x=Object(l.a)(p,2),f=x[0],h=x[1],m=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],v=[];m.map((function(e,t){v=v.concat({a:e,idx:t})}));var g=v.slice(0,13),y=v.slice(13);Object(a.useEffect)((function(){return E()}),[t]);var w=function(e){e.preventDefault(),"Escape"===e.key&&E()},C=function(e){return document.getElementsByClassName("ctr-display")[0].style.backgroundColor=e},U=function(){var e=Object(j.a)(o.a.mark((function e(t,a,s){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d||b(Date.now()),"a"===a&&(r=setInterval((function(){var e=Date.now();h(e)}),1),document.addEventListener("keyup",w)),s!==a){e.next=19;break}if(N+=1,C(null),"z"!==a||N!==m.length){e.next=15;break}return i=(f-d)/1e3,clearInterval(r),e.next=10,c(i);case 10:return e.next=12,O.saveScore(i);case 12:n(i),e.next=17;break;case 15:document.getElementById(t+1).removeAttribute("disabled"),document.getElementById(t+1).focus();case 17:e.next=20;break;case 19:C("red");case 20:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){for(var e=0;e<m.length;e++){var t=0!==e?"disabled":"";document.getElementById(e).disabled=t,document.getElementById(e).value=""}N=0,b(""),h(""),c(""),n(""),C(null),document.getElementById(0).focus(),document.removeEventListener("keyup",w)},I=function(e){return Object(S.jsx)("div",{className:"letterInput",children:e.map((function(e){return Object(S.jsxs)("span",{children:[Object(S.jsx)("label",{children:Object(S.jsxs)("b",{children:["\xa0",e.a,"\xa0"]})}),Object(S.jsx)("input",{disabled:0!==e.idx?"disabled":"",type:"text",id:e.idx,maxLength:"1",onChange:function(t){return U(e.idx,e.a,t.target.value)},style:{width:"20px",textAlign:"center"},autoComplete:"off"})]},e.idx)}))})};return Object(S.jsxs)("div",{children:[Object(S.jsx)(k,{now:f,start:d,localScore:s}),Object(S.jsx)("br",{}),I(g),I(y),Object(S.jsx)("br",{}),Object(S.jsx)(T.a,{variant:"secondary",size:"sm",onClick:function(){return E()},children:"Restart (ESC Key)"})]})},U=function(e){return e.sort((function(e,t){return e.totalTime-t.totalTime}))},E=function(e){var t=e.topPlayers,n=e.setTopPlayers,r=e.allUsers,s=[];return Object(a.useEffect)((function(){0!==r.length&&(r.map((function(e){var t="No Score";if(0!==e.results.length){t=U(e.results)[0].totalTime;var n={username:e.username,totalTime:t};s=s.concat(n)}})),n(U(s).slice(0,5)))}),[r]),Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{children:Object(S.jsx)("u",{children:"Leaderboard"})}),Object(S.jsx)("table",{className:"leaderboard",children:Object(S.jsxs)("tbody",{style:{textAlign:"left"},children:[Object(S.jsx)("th",{children:"User"}),Object(S.jsx)("th",{children:"Time"}),t.map((function(e,t){return Object(S.jsxs)("tr",{children:[Object(S.jsxs)("td",{style:{minWidth:"100px"},children:[t+1,"- ",e.username,"\xa0"]}),Object(S.jsxs)("td",{children:[e.totalTime,"s"]})]},t)}))]})})]})},I=function(e){var t=e.user,n=e.allUsers,r=e.topPlayers,a=e.logout,s=r.find((function(e){return e.username===t.username})),c=n.find((function(e){return e.username===t.username})),i="No Rank",l="No Game Played",u="0";return void 0!==s&&null!==s.totalTime&&(i=1+r.findIndex((function(e){return e.username===t.username})),l=0===r.length?null:s.totalTime,u=c.results.length),Object(S.jsxs)("div",{children:[Object(S.jsxs)("h3",{style:{margin:0},children:["Welcome, ",t.username]}),Object(S.jsxs)("p",{children:["Ranking: ",i]}),Object(S.jsx)("table",{className:"userStats",children:Object(S.jsxs)("tbody",{style:{textAlign:"left"},children:[Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{style:{minWidth:"120px"},children:"Personal Best:"}),Object(S.jsxs)("td",{children:[l,"s"]})]}),Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:"Games played:"}),Object(S.jsx)("td",{children:u})]})]})}),Object(S.jsx)("br",{}),Object(S.jsx)(T.a,{variant:"outline-secondary",size:"sm",onClick:function(){return a()},children:"Logout"})]})},L=function(){var e=Object(j.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.post("/api/login",t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P={userLogin:L},A=function(e){var t=e.setUser,n=e.notification,r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],i=s[1],u=Object(a.useState)(""),d=Object(l.a)(u,2),b=d[0],p=d[1],x=Object(a.useState)(!1),f=Object(l.a)(x,2),h=f[0],m=f[1],v=function(){var e=Object(j.a)(o.a.mark((function e(r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!h){e.next=11;break}return e.prev=2,e.next=5,g.signUp({username:c,password:b});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),n("danger","Invalid Credentials"),e.abrupt("return");case 11:return e.prev=11,e.next=14,P.userLogin({username:c,password:b});case 14:a=e.sent,window.localStorage.setItem("loggedAppUser",JSON.stringify(a)),O.setToken(a.token),i(""),p(""),t(a),n("success","Welcome ".concat(a.username," & Happy alphaTyping!")),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),n("danger","Wrong/Invalid Credentials");case 26:case"end":return e.stop()}}),e,null,[[2,7],[11,23]])})));return function(t){return e.apply(this,arguments)}}(),y=!1===h?"Login":"Sign Up",w=!1===h?"New User?":"Existing User?",k=!1!==h?"Login":"Sign Up";return Object(S.jsx)("div",{className:"loginContainer",children:Object(S.jsxs)("div",{className:"loginDisplay",children:[Object(S.jsxs)("form",{onSubmit:v,children:[Object(S.jsx)("h3",{children:y}),Object(S.jsx)("br",{}),Object(S.jsxs)("div",{className:"loginField",children:["Username:\xa0",Object(S.jsx)("input",{type:"text",value:c,name:"Username",size:"12",onChange:function(e){var t=e.target;return i(t.value)}})]}),Object(S.jsxs)("div",{className:"loginField",children:["Password:\xa0",Object(S.jsx)("input",{type:"password",value:b,name:"Password",size:"12",onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(S.jsx)("br",{}),Object(S.jsx)(T.a,{variant:"secondary",type:"submit",children:"Submit"})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("div",{className:"toggleLoginSignUp",children:[Object(S.jsx)("div",{children:w}),Object(S.jsx)(T.a,{variant:"link",style:{paddingTop:"0"},onClick:function(){m(!h),i(""),p("")},children:k})]})]})})},B=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),c=Object(l.a)(s,2),i=c[0],u=c[1],o=Object(a.useState)([]),j=Object(l.a)(o,2),d=j[0],b=j[1],p=Object(a.useState)(""),x=Object(l.a)(p,2),f=x[0],h=x[1],m=Object(a.useState)(""),v=Object(l.a)(m,2),y=v[0],k=v[1],T=Object(a.useState)(""),N=Object(l.a)(T,2),U=N[0],L=N[1],P=Object(a.useState)(""),B=Object(l.a)(P,2),F=B[0],z=B[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedAppUser");if(e){var t=JSON.parse(e);r(t),O.setToken(t.token)}}),[]),Object(a.useEffect)((function(){g.getAll().then((function(e){return u(e)}))}),[f]);var D=function(){return r(null),window.localStorage.removeItem("loggedAppUser")};return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"notifFlex",children:Object(S.jsx)(w,{notifClass:U,notifMessage:F})}),n?Object(S.jsxs)("div",{className:"mainContainer",children:[Object(S.jsx)("div",{className:"left-display",children:Object(S.jsx)(I,{user:n,allUsers:i,topPlayers:d,logout:D})}),Object(S.jsx)("div",{className:"ctr-display",children:Object(S.jsx)(C,{user:n,totalTime:f,setTotalTime:h,localScore:y,setLocalScore:k})}),Object(S.jsx)("div",{className:"right-display",children:Object(S.jsx)(E,{totalTime:f,topPlayers:d,setTopPlayers:b,allUsers:i})})]}):Object(S.jsx)(A,{setUser:r,notification:function(e,t){L(e),z(t),setTimeout((function(){z(null)}),5e3)}})]})},F=function(){return Object(S.jsx)("div",{className:"footer",children:Object(S.jsx)("small",{children:"Copyright \xa9 2021 Benny Luo"})})},z=(n(59),function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h1",{className:"gameTitle",children:"alphaType"}),Object(S.jsx)(B,{}),Object(S.jsx)(F,{})]})}),D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};n(60);i.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(z,{})}),document.getElementById("root")),D()}},[[61,1,2]]]);
//# sourceMappingURL=main.83d3e51c.chunk.js.map